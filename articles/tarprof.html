<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tarprof">
<title>tarprof • tarprof</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tarprof">
<meta property="og:description" content="tarprof">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tarprof</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/tarprof.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/WEHI-ResearchComputing/tarprof/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>tarprof</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/WEHI-ResearchComputing/tarprof/blob/HEAD/vignettes/tarprof.Rmd" class="external-link"><code>vignettes/tarprof.Rmd</code></a></small>
      <div class="d-none name"><code>tarprof.Rmd</code></div>
    </div>

    
    
<p>We create the targets pipeline as normal:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_script.html" class="external-link">tar_script</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu">tar_target</span><span class="op">(</span><span class="va">sizes</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10E6</span>, <span class="fl">10E7</span>, <span class="fl">10E8</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu">tar_target</span><span class="op">(</span><span class="va">make_vectors</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="va">sizes</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">sizes</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>We need to specify a directory that will be used to save the
profiling results:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">monitor_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"profile_results"</span><span class="op">)</span></span></code></pre></div>
<p>When it comes to running, we pass in the custom
<code>callr_function</code>. In addition, we need to pass that function
arguments using <code>callr_arguments</code>. One of these arguments
must be <code>monitor_path</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_make.html" class="external-link">tar_make</a></span><span class="op">(</span></span>
<span>  callr_function <span class="op">=</span> <span class="fu">tarprof</span><span class="fu">::</span><span class="va"><a href="../reference/callr_profile.html">callr_profile</a></span>,</span>
<span>  callr_arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    monitor_path <span class="op">=</span> <span class="va">monitor_path</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that for the moment, it is not recommended that you use any
parallelism when running the pipeline in profiling mode. In other words,
when calling <code><a href="https://wlandau.github.io/crew/reference/crew_controller_local.html" class="external-link">crew::crew_controller_local</a></code>, use
<code>workers = 1</code>. Eventually I hope to lift this limitation.</p>
<p>Once the targets pipeline has finished, we can access the profiling
data using <code><a href="../reference/profile_data.html">tarprof::profile_data</a></code>. This returns a data frame
where each row is one timepoint, and the columns correspond to various
process metrics.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">profile</span> <span class="op">&lt;-</span> <span class="fu">tarprof</span><span class="fu">::</span><span class="fu"><a href="../reference/profile_data.html">profile_data</a></span><span class="op">(</span><span class="va">monitor_path</span><span class="op">)</span></span>
<span><span class="va">profile</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 371 × 16</span></span></span>
<span><span class="co">##          rss       vms shared  text   lib   data dirty    uss    pss  swap  user</span></span>
<span><span class="co">##        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 124<span style="text-decoration: underline;">297</span>216    3.43<span style="color: #949494;">e</span>8 7.58<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 1.88<span style="color: #949494;">e</span>8     0 1.17<span style="color: #949494;">e</span>8 1.19<span style="color: #949494;">e</span>8     0  1.02</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 129<span style="text-decoration: underline;">732</span>608    3.48<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 1.93<span style="color: #949494;">e</span>8     0 1.23<span style="color: #949494;">e</span>8 1.24<span style="color: #949494;">e</span>8     0  1.13</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 209<span style="text-decoration: underline;">747</span>968    4.28<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 2.73<span style="color: #949494;">e</span>8     0 2.03<span style="color: #949494;">e</span>8 2.04<span style="color: #949494;">e</span>8     0  1.21</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 209<span style="text-decoration: underline;">747</span>968    4.28<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 2.73<span style="color: #949494;">e</span>8     0 2.03<span style="color: #949494;">e</span>8 2.04<span style="color: #949494;">e</span>8     0  1.32</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 209<span style="text-decoration: underline;">747</span>968    4.28<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 2.73<span style="color: #949494;">e</span>8     0 2.03<span style="color: #949494;">e</span>8 2.04<span style="color: #949494;">e</span>8     0  1.43</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 209<span style="text-decoration: underline;">747</span>968    4.28<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 2.73<span style="color: #949494;">e</span>8     0 2.03<span style="color: #949494;">e</span>8 2.04<span style="color: #949494;">e</span>8     0  1.54</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 209<span style="text-decoration: underline;">747</span>968    4.28<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 2.73<span style="color: #949494;">e</span>8     0 2.03<span style="color: #949494;">e</span>8 2.04<span style="color: #949494;">e</span>8     0  1.65</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 209<span style="text-decoration: underline;">797</span>120    4.28<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 2.73<span style="color: #949494;">e</span>8     0 2.03<span style="color: #949494;">e</span>8 2.04<span style="color: #949494;">e</span>8     0  1.76</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 292<span style="text-decoration: underline;">786</span>176    1.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 1.07<span style="color: #949494;">e</span>9     0 3.03<span style="color: #949494;">e</span>8 3.04<span style="color: #949494;">e</span>8     0  1.84</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 606<span style="text-decoration: underline;">646</span>272    1.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0 1.07<span style="color: #949494;">e</span>9     0 6.18<span style="color: #949494;">e</span>8 6.19<span style="color: #949494;">e</span>8     0  1.85</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 361 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more variables: system &lt;dbl&gt;, children_user &lt;dbl&gt;, children_system &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   time &lt;dttm&gt;, pid &lt;int&gt;</span></span></span></code></pre>
<p>However, this information isn’t much help without the knowledge of
which targets were run at which times. We can integrate this information
using <code><a href="../reference/profile_per_target.html">tarprof::profile_per_target</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">per_target</span> <span class="op">&lt;-</span> <span class="fu">tarprof</span><span class="fu">::</span><span class="fu"><a href="../reference/profile_per_target.html">profile_per_target</a></span><span class="op">(</span><span class="va">profile</span><span class="op">)</span></span>
<span><span class="va">per_target</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 16 × 40</span></span></span>
<span><span class="co">##       rss    vms shared  text   lib data_profile dirty    uss    pss  swap  user</span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 2.10<span style="color: #949494;">e</span>8 4.28<span style="color: #949494;">e</span>8 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0    273<span style="text-decoration: underline;">293</span>312     0 2.03<span style="color: #949494;">e</span>8 2.04<span style="color: #949494;">e</span>8     0  1.65</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 1.01<span style="color: #949494;">e</span>9 1.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">1</span>073<span style="text-decoration: underline;">295</span>360     0 1.00<span style="color: #949494;">e</span>9 1.00<span style="color: #949494;">e</span>9     0  7.22</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 1.01<span style="color: #949494;">e</span>9 1.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">1</span>073<span style="text-decoration: underline;">295</span>360     0 1.00<span style="color: #949494;">e</span>9 1.00<span style="color: #949494;">e</span>9     0  7.34</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 1.01<span style="color: #949494;">e</span>9 1.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">1</span>073<span style="text-decoration: underline;">295</span>360     0 1.00<span style="color: #949494;">e</span>9 1.00<span style="color: #949494;">e</span>9     0  7.47</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 68.7 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 68.9 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 69.2 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 69.4 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 69.6 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 69.8 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 70.1 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">12</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 70.3 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">13</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 70.5 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">14</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 70.7 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">15</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 70.9 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">16</span> 9.01<span style="color: #949494;">e</span>9 9.23<span style="color: #949494;">e</span>9 7.81<span style="color: #949494;">e</span>6  <span style="text-decoration: underline;">4</span>096     0   <span style="text-decoration: underline;">9</span>073<span style="text-decoration: underline;">299</span>456     0 9.00<span style="color: #949494;">e</span>9 9.00<span style="color: #949494;">e</span>9     0 71.2 </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 29 more variables: system &lt;dbl&gt;, children_user &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   children_system &lt;dbl&gt;, time_profile &lt;dttm&gt;, pid &lt;int&gt;, name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   type &lt;chr&gt;, data_targets &lt;chr&gt;, command &lt;chr&gt;, depend &lt;chr&gt;, seed &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   path &lt;list&gt;, time_targets &lt;dttm&gt;, size &lt;chr&gt;, bytes &lt;dbl&gt;, format &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   repository &lt;chr&gt;, iteration &lt;chr&gt;, parent &lt;chr&gt;, children &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   seconds &lt;dbl&gt;, warnings &lt;chr&gt;, error &lt;chr&gt;, end_time &lt;dttm&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   start_time &lt;dttm&gt;, mid_time &lt;dttm&gt;, preceding_end &lt;dttm&gt;, …</span></span></span></code></pre>
<p>Next, we can use the built-in summary function to get the maximum
memory usage and CPU efficiency of each target:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">profile_summary</span> <span class="op">&lt;-</span> <span class="fu">tarprof</span><span class="fu">::</span><span class="fu"><a href="../reference/summarise_targets.html">summarise_targets</a></span><span class="op">(</span><span class="va">per_target</span><span class="op">)</span></span>
<span><span class="va">profile_summary</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">##   name                          peak_memory peak_memory_time    cpu_efficiency</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> make_vectors_207c35afd65876c8   209<span style="text-decoration: underline;">747</span>968 2024-05-29 <span style="color: #949494;">12:00:19</span>          0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> make_vectors_9105835678f0321b  <span style="text-decoration: underline;">1</span>009<span style="text-decoration: underline;">717</span>248 2024-05-29 <span style="color: #949494;">12:00:25</span>          0.653</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> make_vectors_c89a8a9a1114a9aa  <span style="text-decoration: underline;">9</span>009<span style="text-decoration: underline;">582</span>080 2024-05-29 <span style="color: #949494;">12:01:30</span>          0.895</span></span></code></pre>
<p>Finally we can use <code><a href="../reference/memory_plot.html">tarprof::memory_plot</a></code> to represent the
memory usage In the plot below, each colour corresponds to a different
target. The coloured band indicates the time that <code>targets</code>
thinks the target was running for (although I’m unsure how accurate this
is). The labelled point indicates the maximum memory usage for that
target. Note that these maximum points correspond to the value of
<code>peak_memory</code> in the previous data frame.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tarprof</span><span class="fu">::</span><span class="fu"><a href="../reference/memory_plot.html">memory_plot</a></span><span class="op">(</span><span class="va">profile</span><span class="op">)</span></span></code></pre></div>
<p><img src="tarprof_files/figure-html/unnamed-chunk-9-1.png" width="960"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Milton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
